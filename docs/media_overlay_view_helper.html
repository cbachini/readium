<!DOCTYPE html>  <html> <head>   <title>media_overlay_view_helper.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="plugins.html">                 plugins.js               </a>                                           <a class="source" href="web_plugins.html">                 web_plugins.js               </a>                                           <a class="source" href="alternate_style_tag_selector.html">                 alternate_style_tag_selector.js               </a>                                           <a class="source" href="audioClipPlayer.html">                 audioClipPlayer.js               </a>                                           <a class="source" href="epub.html">                 epub.js               </a>                                           <a class="source" href="epub_controller.html">                 epub_controller.js               </a>                                           <a class="source" href="ibooks_options_parser.html">                 ibooks_options_parser.js               </a>                                           <a class="source" href="manifest_item.html">                 manifest_item.js               </a>                                           <a class="source" href="mediaOverlay.html">                 mediaOverlay.js               </a>                                           <a class="source" href="media_overlay_controller.html">                 media_overlay_controller.js               </a>                                           <a class="source" href="media_overlay_view_helper.html">                 media_overlay_view_helper.js               </a>                                           <a class="source" href="options_presenter.html">                 options_presenter.js               </a>                                           <a class="source" href="packageDocument.html">                 packageDocument.js               </a>                                           <a class="source" href="package_document_parser.html">                 package_document_parser.js               </a>                                           <a class="source" href="page_number_display_logic.html">                 page_number_display_logic.js               </a>                                           <a class="source" href="pagination_strategy_selector.html">                 pagination_strategy_selector.js               </a>                                           <a class="source" href="path_resolver.html">                 path_resolver.js               </a>                                           <a class="source" href="readium_options.html">                 readium_options.js               </a>                                           <a class="source" href="readium_pagination.html">                 readium_pagination.js               </a>                                           <a class="source" href="smilModel.html">                 smilModel.js               </a>                                           <a class="source" href="toc.html">                 toc.js               </a>                                           <a class="source" href="trigger.html">                 trigger.js               </a>                                           <a class="source" href="validated_package_meta_data.html">                 validated_package_meta_data.js               </a>                                           <a class="source" href="crx_library_namespace.html">                 crx_library_namespace.js               </a>                                           <a class="source" href="crx_viewer_namespace.html">                 crx_viewer_namespace.js               </a>                                           <a class="source" href="ws_lib_namespace.html">                 ws_lib_namespace.js               </a>                                           <a class="source" href="crx_library_router.html">                 crx_library_router.js               </a>                                           <a class="source" href="crx_viewer_router.html">                 crx_viewer_router.js               </a>                                           <a class="source" href="ws_router.html">                 ws_router.js               </a>                                           <a class="source" href="accessibility.html">                 accessibility.js               </a>                                           <a class="source" href="bb_file_system_sync.html">                 bb_file_system_sync.js               </a>                                           <a class="source" href="cookie_utils.html">                 cookie_utils.js               </a>                                           <a class="source" href="google_analytics_loader.html">                 google_analytics_loader.js               </a>                                           <a class="source" href="handlebars_helpers.html">                 handlebars_helpers.js               </a>                                           <a class="source" href="local_storage_sync.html">                 local_storage_sync.js               </a>                                           <a class="source" href="md5.html">                 md5.js               </a>                                           <a class="source" href="user_agent_utils.html">                 user_agent_utils.js               </a>                                           <a class="source" href="fixed_layout_book_zoomer.html">                 fixed_layout_book_zoomer.js               </a>                                           <a class="source" href="nav_widget_view.html">                 nav_widget_view.js               </a>                                           <a class="source" href="options_view.html">                 options_view.js               </a>                                           <a class="source" href="toc_view.html">                 toc_view.js               </a>                                           <a class="source" href="toolbar_view.html">                 toolbar_view.js               </a>                                           <a class="source" href="httpFileApi.html">                 httpFileApi.js               </a>                                           <a class="source" href="library.html">                 library.js               </a>                                           <a class="source" href="viewer.html">                 viewer.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               media_overlay_view_helper.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Description: This model provides helper methods related to Media Overlay functionality required by the fixed and reflowable views.
Rationale: While these helpers could be included on the view objects themselves, this model was created to encapsulate view functionality
  related to the display of media overlays for three reasons: First, the requirements for media overlays are expected to grow, which
  would have produced larger and larger view models (by code size). Second, the primary responsibility of the pagination views is to paginate epub content
  and provide an interface for accessing rendered content; adding MO methods to those objects would have clouded the abstraction. Third, MO
  is the primary responsiblity of one contributor. Encapsulating MO view functionality in this model makes it easier for contributors to 
  focus on their areas of responsibility. </p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>REFACTORING CANDIDATE: The interfaces for the methods here are not particularly tight. In some cases, entire views are being 
  passed to the methods. It would be better if the interfaces were built around something consistent; the page body being passed, 
  etc. 
  Interaction with the "pagination" could be improved too. It would be ideal to encorporate the concept of the "currently rendered
  pages" into the methods here; this would use the ReadiumPagination model, which abstracts this concept. Currently, these methods
  are working through the backbone views, but essentially using the DOM.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Readium</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">MediaOverlayViewHelper</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>------------------------------------------------------------------------------------ //
 "PUBLIC" METHODS (THE API)                                                          //
------------------------------------------------------------------------------------ //</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">epubController</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;epubController&quot;</span><span class="p">);</span>
	<span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>active class comes from the package document metadata
authors can specify the class name they want to have applied to 
active MO text fragments</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">addActiveClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fragElm</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">activeClass</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getActiveClass</span><span class="p">();</span>
        <span class="nx">fragElm</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">removeActiveClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">body</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>   
            <span class="kd">var</span> <span class="nx">activeClass</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getActiveClass</span><span class="p">();</span>
            <span class="kd">var</span> <span class="nx">lastFrag</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">activeClass</span><span class="p">);</span>
            <span class="nx">lastFrag</span><span class="p">.</span><span class="nx">toggleClass</span><span class="p">(</span><span class="nx">activeClass</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">lastFrag</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">},</span>
    </pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>we're not using themes for fixed layout, so just apply the active class name to the
current MO fragment, so that any authored styles will be applied.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">renderFixedLayoutMoFragHighlight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">currentPages</span><span class="p">,</span> <span class="nx">currentMOFrag</span><span class="p">,</span> <span class="nx">fixedLayoutView</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">currentPages</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">fixedLayoutView</span><span class="p">.</span><span class="nx">getPageBody</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
           <span class="nx">that</span><span class="p">.</span><span class="nx">removeActiveClass</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
        <span class="p">});</span> 
        
		<span class="k">if</span><span class="p">(</span><span class="nx">currentMOFrag</span><span class="p">)</span> <span class="p">{</span>
    		<span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">currentPages</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span> <span class="p">{</span>
                <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">fixedLayoutView</span><span class="p">.</span><span class="nx">getPageBody</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                <span class="kd">var</span> <span class="nx">newFrag</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">currentMOFrag</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">newFrag</span><span class="p">)</span> <span class="p">{</span>
                	<span class="nx">that</span><span class="p">.</span><span class="nx">addActiveClass</span><span class="p">(</span><span class="nx">newFrag</span><span class="p">);</span>	
                <span class="p">}</span> 
           <span class="p">});</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="nx">renderFixedMoPlaying</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">currentPages</span><span class="p">,</span> <span class="nx">MOIsPlaying</span><span class="p">,</span> <span class="nx">fixedLayoutView</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>if we are using the author's style for highlighting, then just clear it if we are not playing</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">authorActiveClassExists</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">MOIsPlaying</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>get rid of the last highlight</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">currentPages</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">idx</span><span class="p">)</span> <span class="p">{</span>
                   <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">fixedLayoutView</span><span class="p">.</span><span class="nx">getPageBody</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
                   <span class="nx">that</span><span class="p">.</span><span class="nx">removeActiveClass</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
                <span class="p">});</span> 
            <span class="p">}</span>
        <span class="p">}</span>
	<span class="p">},</span>
    </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>highlight the text</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">renderReflowableMoFragHighlight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">currentTheme</span><span class="p">,</span> <span class="nx">reflowableView</span><span class="p">,</span> <span class="nx">currentMOFrag</span><span class="p">)</span> <span class="p">{</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">currentTheme</span> <span class="o">===</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">currentTheme</span> <span class="o">=</span> <span class="s2">&quot;default-theme&quot;</span><span class="p">;</span>
		<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>get rid of the last highlight</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">reflowableView</span><span class="p">.</span><span class="nx">getBody</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">lastFrag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeActiveClass</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
        </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>if the author did not define an active class themselves</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">authorActiveClassExists</span><span class="p">()</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">lastFrag</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="nx">lastFrag</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
                
		<span class="k">if</span> <span class="p">(</span><span class="nx">currentMOFrag</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>add active class to the new MO fragment</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span> <span class="nx">newFrag</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">currentMOFrag</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">newFrag</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">addActiveClass</span><span class="p">(</span><span class="nx">newFrag</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">authorActiveClassExists</span><span class="p">()</span> <span class="o">==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="nx">newFrag</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="nx">reflowableView</span><span class="p">.</span><span class="nx">themes</span><span class="p">[</span><span class="nx">currentTheme</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]);</span>   
                <span class="p">}</span>
            <span class="p">}</span>
		<span class="p">}</span>
	<span class="p">},</span>	</pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>reflowable pagination uses default readium themes, which include a 'fade' effect on the inactive MO text</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="nx">renderReflowableMoPlaying</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">currentTheme</span><span class="p">,</span> <span class="nx">MOIsPlaying</span><span class="p">,</span> <span class="nx">reflowableView</span><span class="p">)</span> <span class="p">{</span>
		</pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>if we are using the author's default style for highlighting, then just clear it if we are not playing</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">authorActiveClassExists</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">MOIsPlaying</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>get rid of the last highlight</p>             </td>             <td class="code">               <div class="highlight"><pre>        		<span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">reflowableView</span><span class="p">.</span><span class="nx">getBody</span><span class="p">();</span>
                <span class="kd">var</span> <span class="nx">lastFrag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeActiveClass</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="p">{</span>
    		<span class="k">if</span> <span class="p">(</span><span class="nx">currentTheme</span> <span class="o">===</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="p">{</span> 
    			<span class="nx">currentTheme</span> <span class="o">=</span> <span class="s2">&quot;default-theme&quot;</span><span class="p">;</span>
    		<span class="p">}</span>
        
    		<span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">reflowableView</span><span class="p">.</span><span class="nx">getBody</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">MOIsPlaying</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>change the color of the body text so it looks inactive compared to the MO fragment that is playing</p>             </td>             <td class="code">               <div class="highlight"><pre>    			<span class="nx">$</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="nx">reflowableView</span><span class="p">.</span><span class="nx">themes</span><span class="p">[</span><span class="nx">currentTheme</span><span class="p">][</span><span class="s2">&quot;mo-color&quot;</span><span class="p">]);</span>
    		<span class="p">}</span>
    		<span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>reset the color of the text to the theme default</p>             </td>             <td class="code">               <div class="highlight"><pre>    			<span class="nx">$</span><span class="p">(</span><span class="nx">body</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="nx">reflowableView</span><span class="p">.</span><span class="nx">themes</span><span class="p">[</span><span class="nx">currentTheme</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]);</span>	</pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>remove style info from the last MO fragment</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="kd">var</span> <span class="nx">lastFrag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeActiveClass</span><span class="p">(</span><span class="nx">reflowableView</span><span class="p">.</span><span class="nx">getBody</span><span class="p">());</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">lastFrag</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">$</span><span class="p">(</span><span class="nx">lastFrag</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
                <span class="p">}</span>
    		<span class="p">}</span>
        <span class="p">}</span>
		
	<span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>------------------------------------------------------------------------------------ //
 "PRIVATE" HELPERS                                                                   //
------------------------------------------------------------------------------------ //</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">getActiveClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">activeClass</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">epubController</span><span class="p">.</span><span class="nx">packageDocument</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">).</span><span class="nx">active_class</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">activeClass</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>we need an active class value to use, whether the author specified it or not</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">activeClass</span> <span class="o">=</span> <span class="s2">&quot;-readium-epub-media-overlay-active&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">activeClass</span><span class="p">;</span>
    <span class="p">},</span>
    </pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>did the author supply an active-class metdata value</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">authorActiveClassExists</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">activeClass</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">epubController</span><span class="p">.</span><span class="nx">packageDocument</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;metadata&quot;</span><span class="p">).</span><span class="nx">active_class</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">activeClass</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 